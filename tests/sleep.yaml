apiVersion: v1
kind: Pod
# trivy:ignore:AVD-KSV-0110 Test manifests use default namespace
metadata:
  name: kimia
spec:
  restartPolicy: Never
  securityContext:
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
    seccompProfile:
      type: Unconfined
  containers:
  # trivy:ignore:AVD-KSV-0125 Internal test registry is trusted
  - name: kimia
    image: 100.92.16.57:5000/rapidfort/kimia
    command: [ "sleep", "inf" ]
    resources:
      requests:
        cpu: "1"
        memory: "256 Mi"
      limits:
        cpu: "1"
        memory: "1Gi"
    # trivy:ignore:AVD-KSV-0001 Kimia requires privilege escalation for container building
    # trivy:ignore:AVD-KSV-0106 AppArmor Unconfined needed for container operations
    securityContext:
      runAsUser: 1000
      runAsGroup: 1000
      allowPrivilegeEscalation: true
      appArmorProfile:
        type: Unconfined
      seccompProfile:
        type: Unconfined

